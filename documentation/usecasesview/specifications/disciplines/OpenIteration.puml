@startuml
!include ../StateDiagramsSetUp.puml

state PROJECT_MANAGEMENT as ":PROJECT_MANAGEMENT"

    0 --> OpenIteration
    note on link
            User requests to open iteration
    end note
    USE_CASES_MANAGEMENT --> OpenIteration
    note on link
        User requests to open iteration
    end note
    MEMBERS_MANAGEMENT --> OpenIteration
    note on link
            User requests to open iteration
    end note
    ITERATION_MANAGEMENT_ --> OpenIteration

state ITERATION_MANAGEMENT
state USE_CASES_MANAGEMENT
state MEMBERS_MANAGEMENT

    state 0 as ":PROJECT_MANAGEMENT"
state OpenIteration {

    state 1  <<choice>>
    state 4 as " "
    state 6 as " "
    state 7 <<choice>>
    state 9 as " "
    state USE_CASES_MANAGEMENT0 as " "
    state 10 as " "
    state 11 as " "

    [*] --> 1

    1 --> 4
    note on link
        [pending use cases assignation for the current iteration ]
    end note
    4 --> 6
    note on link
        <b>System shows</b>
        ** use cases ordered by prioritization
        <b>System requires</b>
        * use cases for the current iteration
        ** and his desired realization
        *** REQUIREMENTS | ANALYSIS | DESIGN | IMPLEMENTATION
        <b>System allows</b>
        * Confirm open iteration
        * cancel
    end note

    6 -[#red]down-> 11
    note on link
        User requests to cancel
    end note

    6 --> 4
    note on link
        User provides
        * use case for the current iteration
        * his desired realization
    end note
    6 --> 7
    note on link
        User requests to confirm open iteration
    end note

    7 --> 9
    note on link
    [usecases introduced >= 1
    AND
    all use cases introduced have desired realization]
    end note

    9--> USE_CASES_MANAGEMENT0
    note on link
        <b>System shows</b>
        * NotAssignedCost for each discipline have been generated
    end note

    7 --> 10

    10 -[#red]-> 4
    note on link
        <b>System shows</b>
        * more than one usecases should be introduced
        * some use case has not desired realization
    end note

    1 --> USE_CASES_MANAGEMENT0
    note on link
        [Iteration opened]
    end note

}
    11 -[#red]down-> PROJECT_MANAGEMENT
    note on link
            <b>System shows</b>
            * operation cancelled
            * for each iteration in project ordered by number ASC
            ** start date
            ** end date
            ** duration (bussiness days)
            ** dias transcurridos (bussiness days) and his percentage
            <b>System allows</b>
            * Open project
            * Open openPhases
            * Open iteration
            * Open usecases
            * Open members
            * Close system
    end note

    USE_CASES_MANAGEMENT0 --> ITERATION_MANAGEMENT
    note on link
     <b>System shows</b>
     * iteration
     ** identifier
     ** start date
     ** end date
     * for each member
     **assignedActivities in his datetime until end of current iteration
     *** activity type
     **** type as one of the existent RUP activities.
     *** activity description
     * for each discipline (requirements, analysis, design, implementation)
     ** NotAssignedCost
     ** NotAssignedActivities (with activity type)
     <b>System allows</b>
     * Split activity
     * Assign activity
     * Re-estimate activity
     * Merge activity
     * Open Iterations
     * Open members
     * Open usecases
     * Close system
    end note

    ITERATION_MANAGEMENT --> [*]

    PROJECT_MANAGEMENT -[#red]-> [*]

@enduml
